name: Deploy to Gist
run-name: Sync gist file 'Mihomo_Config_Client'
on: [push]

jobs:
  to-gist:
    runs-on: ubuntu-latest
    permissions:
      contents: write
      pull-requests: write
    steps:
      - uses: actions/checkout@v4

      #- name: YAML Update Action
      #  uses: fjogeleit/yaml-update-action@v0.16.0
      #  with:
          # YAML file which should be updated
      #    valueFile: ClashMi_Config.yaml
      #    createPR: false
      #    masterBranchName: main
      #    updateFile: false
      #    commitUserName: yitang823
      #    commitUserEmail: yitang823@gamil.com
      #    message: test
      #    propertyPath: "#{$proxy-providers}.Mitce.exclude-filter"
      #    value: "123"
        

      - uses: exuanbo/actions-deploy-gist@v1.1.4
        with:
          # Set personal access token for updating gist.
          token: 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
          # Set id of the gist to be updated.
          gist_id: 4f41d6309a4f42b2c64d32448642d85b
          # Set description of the gist.
          gist_description: Mihomo_Config_Client
          # Set file name in the gist.
          gist_file_name: Mihomo_Config.yaml
          # Set path of the file to be deployed.
          file_path: ../Client/Config.yaml
          # Set file type of the file to be deployed.
          file_type: text
